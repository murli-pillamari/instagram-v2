{"ast":null,"code":"import _defineProperty from\"/opt/lampp/htdocs/demo/murli/instagram/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/opt/lampp/htdocs/demo/murli/instagram/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/opt/lampp/htdocs/demo/murli/instagram/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/opt/lampp/htdocs/demo/murli/instagram/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/opt/lampp/htdocs/demo/murli/instagram/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/opt/lampp/htdocs/demo/murli/instagram/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _objectSpread from\"/opt/lampp/htdocs/demo/murli/instagram/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Button,TextField}from\"@mui/material\";import React from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var withRouter=function withRouter(WrappedComponent){return function(props){var params=useParams();return/*#__PURE__*/_jsx(WrappedComponent,_objectSpread(_objectSpread({},props),{},{params:params}));};};var AddPost=/*#__PURE__*/function(_React$Component){_inherits(AddPost,_React$Component);var _super=_createSuper(AddPost);function AddPost(props){var _this;_classCallCheck(this,AddPost);_this=_super.call(this,props);_this.addPostClick=function(){var paramUserId=_this.props.params.paramUserId;if(paramUserId){var _userData$find;var userData=JSON.parse(localStorage.getItem(\"localUserPost\"));var userPostIndex=(_userData$find=userData.find(function(data){return data.userId===parseInt(paramUserId);}))===null||_userData$find===void 0?void 0:_userData$find.userId;console.log(\"userPostIndex: \",userPostIndex);// const index = userData.findIndex((item)=>item.userId === )\n}var _this$state$userPost=_this.state.userPost,caption=_this$state$userPost.caption,location=_this$state$userPost.location;if(caption&&location){var array=localStorage.getItem(\"localUserPost\");var items=[];if(array){items=JSON.parse(array);}items.push(_this.state.userPost);items.forEach(function(items,index){if(index+1!==items.userId){items.heartCount=0;items.comments=[];items.commentHide=true;}items.userId=index+1;});localStorage.setItem(\"localUserPost\",JSON.stringify(items));_this.setState({userPost:items});window.location.href=\"./\";}else{alert(\"Please fill the details\");}};_this.onImageChange=function(e){var reader=new FileReader();reader.readAsDataURL(e.target.files[0]);// var imgUrl;\nreader.onload=function(event){_this.setState({userPost:{postImage:event.target.result}});};};_this.setPostData=function(e){_this.setState({userPost:_objectSpread(_objectSpread({},_this.state.userPost),{},_defineProperty({},e.target.name,e.target.value))});};console.log(_this.props);_this.state={userPost:{userId:0,postImage:null,caption:null,location:null,heartCount:0,commentHide:true,comments:[]},userPosts:[]};_this.setPostData=_this.setPostData.bind(_assertThisInitialized(_this));_this.addPostClick=_this.addPostClick.bind(_assertThisInitialized(_this));_this.onImageChange=_this.onImageChange.bind(_assertThisInitialized(_this));return _this;}_createClass(AddPost,[{key:\"componentDidMount\",value:function componentDidMount(){var paramUserId=this.props.params.paramUserId;if(paramUserId){var userData=JSON.parse(localStorage.getItem(\"localUserPost\"));var userPost=userData.find(function(data){return data.userId===parseInt(paramUserId);});this.setState({userPost:userPost});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){console.log(\"userPost did update: \",this.state.userPost);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"\",children:\"Add Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-10 mt-10 flex flex-col\",children:[/*#__PURE__*/_jsx(TextField,{type:\"file\",onChange:this.onImageChange,error:!this.state.userPost.postImage,helperText:\"Field is required\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{onChange:this.setPostData,name:\"caption\",label:\"Caption\",error:!this.state.userPost.caption,helperText:\"Field is required\",value:this.state.userPost.caption||\"\"}),/*#__PURE__*/_jsx(TextField,{onChange:this.setPostData,name:\"location\",label:\"Location\",error:!this.state.userPost.location,helperText:\"Field is required\",value:this.state.userPost.location||\"\"}),/*#__PURE__*/_jsx(Button,{onClick:this.addPostClick,className:\"w-2/5 self-center\",variant:\"outlined\",children:\"ADD\"})]})]})});}}]);return AddPost;}(React.Component);export default withRouter(AddPost);","map":{"version":3,"names":["Button","TextField","React","useParams","useNavigate","withRouter","WrappedComponent","props","params","AddPost","addPostClick","paramUserId","userData","JSON","parse","localStorage","getItem","userPostIndex","find","data","userId","parseInt","console","log","state","userPost","caption","location","array","items","push","forEach","index","heartCount","comments","commentHide","setItem","stringify","setState","window","href","alert","onImageChange","e","reader","FileReader","readAsDataURL","target","files","onload","event","postImage","result","setPostData","name","value","userPosts","bind","Component"],"sources":["/opt/lampp/htdocs/demo/murli/instagram/src/components/addPost.jsx"],"sourcesContent":["import { Button, TextField } from \"@mui/material\";\nimport React from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\n\nexport const withRouter = (WrappedComponent) => (props) => {\n  const params = useParams();\n  return <WrappedComponent {...props} params={params} />;\n};\nclass AddPost extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(this.props);\n    this.state = {\n      userPost: {\n        userId: 0,\n        postImage: null,\n        caption: null,\n        location: null,\n        heartCount: 0,\n        commentHide: true,\n        comments: [],\n      },\n      userPosts: [],\n    };\n    this.setPostData = this.setPostData.bind(this);\n    this.addPostClick = this.addPostClick.bind(this);\n    this.onImageChange = this.onImageChange.bind(this);\n  }\n\n  componentDidMount() {\n    const { paramUserId } = this.props.params;\n    if (paramUserId) {\n      const userData = JSON.parse(localStorage.getItem(\"localUserPost\"));\n      const userPost = userData.find((data) => {\n        return data.userId === parseInt(paramUserId);\n      });\n      this.setState({\n        userPost: userPost,\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    console.log(\"userPost did update: \", this.state.userPost);\n  }\n  addPostClick = () => {\n    const { paramUserId } = this.props.params;\n    if (paramUserId) {\n      const userData = JSON.parse(localStorage.getItem(\"localUserPost\"));\n      const userPostIndex = userData.find(\n        (data) => data.userId === parseInt(paramUserId)\n      )?.userId;\n      console.log(\"userPostIndex: \", userPostIndex);\n      // const index = userData.findIndex((item)=>item.userId === )\n    }\n\n    const { caption, location } = this.state.userPost;\n    if (caption && location) {\n      var array = localStorage.getItem(\"localUserPost\");\n\n      let items = [];\n\n      if (array) {\n        items = JSON.parse(array);\n      }\n      items.push(this.state.userPost);\n      items.forEach((items, index) => {\n        if (index + 1 !== items.userId) {\n          items.heartCount = 0;\n          items.comments = [];\n          items.commentHide = true;\n        }\n        items.userId = index + 1;\n      });\n\n      localStorage.setItem(\"localUserPost\", JSON.stringify(items));\n      this.setState({\n        userPost: items,\n      });\n      window.location.href = \"./\";\n    } else {\n      alert(\"Please fill the details\");\n    }\n  };\n  onImageChange = (e) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(e.target.files[0]);\n    // var imgUrl;\n    reader.onload = (event) => {\n      this.setState({\n        userPost: {\n          postImage: event.target.result,\n        },\n      });\n    };\n  };\n  setPostData = (e) => {\n    this.setState({\n      userPost: {\n        ...this.state.userPost,\n        [e.target.name]: e.target.value,\n      },\n    });\n  };\n  render() {\n    return (\n      <>\n        <div className=\"flex flex-col\">\n          <h2 className=\"\">Add Post</h2>\n          <div className=\"px-10 mt-10 flex flex-col\">\n            <TextField\n              type=\"file\"\n              onChange={this.onImageChange}\n              error={!this.state.userPost.postImage}\n              helperText=\"Field is required\"\n            />\n            <br />\n            <TextField\n              onChange={this.setPostData}\n              name=\"caption\"\n              label=\"Caption\"\n              error={!this.state.userPost.caption}\n              helperText=\"Field is required\"\n              value={this.state.userPost.caption || \"\"}\n            />\n            <TextField\n              onChange={this.setPostData}\n              name=\"location\"\n              label=\"Location\"\n              error={!this.state.userPost.location}\n              helperText=\"Field is required\"\n              value={this.state.userPost.location || \"\"}\n            />\n            <Button\n              onClick={this.addPostClick}\n              className=\"w-2/5 self-center\"\n              variant=\"outlined\"\n            >\n              ADD\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\nexport default withRouter(AddPost);\n"],"mappings":"q2BAAA,OAASA,MAAT,CAAiBC,SAAjB,KAAkC,eAAlC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,kBAAvC,C,6IAEA,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,gBAAD,QAAsB,UAACC,KAAD,CAAW,CACzD,GAAMC,OAAM,CAAGL,SAAS,EAAxB,CACA,mBAAO,KAAC,gBAAD,gCAAsBI,KAAtB,MAA6B,MAAM,CAAEC,MAArC,GAAP,CACD,CAHyB,EAAnB,C,GAIDC,Q,8GACJ,iBAAYF,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MAoCnBG,YApCmB,CAoCJ,UAAM,CACnB,GAAQC,YAAR,CAAwB,MAAKJ,KAAL,CAAWC,MAAnC,CAAQG,WAAR,CACA,GAAIA,WAAJ,CAAiB,oBACf,GAAMC,SAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAjB,CACA,GAAMC,cAAa,iBAAGL,QAAQ,CAACM,IAAT,CACpB,SAACC,IAAD,QAAUA,KAAI,CAACC,MAAL,GAAgBC,QAAQ,CAACV,WAAD,CAAlC,EADoB,CAAH,yCAAG,eAEnBS,MAFH,CAGAE,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BN,aAA/B,EACA;AACD,CAED,yBAA8B,MAAKO,KAAL,CAAWC,QAAzC,CAAQC,OAAR,sBAAQA,OAAR,CAAiBC,QAAjB,sBAAiBA,QAAjB,CACA,GAAID,OAAO,EAAIC,QAAf,CAAyB,CACvB,GAAIC,MAAK,CAAGb,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAZ,CAEA,GAAIa,MAAK,CAAG,EAAZ,CAEA,GAAID,KAAJ,CAAW,CACTC,KAAK,CAAGhB,IAAI,CAACC,KAAL,CAAWc,KAAX,CAAR,CACD,CACDC,KAAK,CAACC,IAAN,CAAW,MAAKN,KAAL,CAAWC,QAAtB,EACAI,KAAK,CAACE,OAAN,CAAc,SAACF,KAAD,CAAQG,KAAR,CAAkB,CAC9B,GAAIA,KAAK,CAAG,CAAR,GAAcH,KAAK,CAACT,MAAxB,CAAgC,CAC9BS,KAAK,CAACI,UAAN,CAAmB,CAAnB,CACAJ,KAAK,CAACK,QAAN,CAAiB,EAAjB,CACAL,KAAK,CAACM,WAAN,CAAoB,IAApB,CACD,CACDN,KAAK,CAACT,MAAN,CAAeY,KAAK,CAAG,CAAvB,CACD,CAPD,EASAjB,YAAY,CAACqB,OAAb,CAAqB,eAArB,CAAsCvB,IAAI,CAACwB,SAAL,CAAeR,KAAf,CAAtC,EACA,MAAKS,QAAL,CAAc,CACZb,QAAQ,CAAEI,KADE,CAAd,EAGAU,MAAM,CAACZ,QAAP,CAAgBa,IAAhB,CAAuB,IAAvB,CACD,CAvBD,IAuBO,CACLC,KAAK,CAAC,yBAAD,CAAL,CACD,CACF,CA1EkB,OA2EnBC,aA3EmB,CA2EH,SAACC,CAAD,CAAO,CACrB,GAAMC,OAAM,CAAG,GAAIC,WAAJ,EAAf,CACAD,MAAM,CAACE,aAAP,CAAqBH,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAArB,EACA;AACAJ,MAAM,CAACK,MAAP,CAAgB,SAACC,KAAD,CAAW,CACzB,MAAKZ,QAAL,CAAc,CACZb,QAAQ,CAAE,CACR0B,SAAS,CAAED,KAAK,CAACH,MAAN,CAAaK,MADhB,CADE,CAAd,EAKD,CAND,CAOD,CAtFkB,OAuFnBC,WAvFmB,CAuFL,SAACV,CAAD,CAAO,CACnB,MAAKL,QAAL,CAAc,CACZb,QAAQ,gCACH,MAAKD,KAAL,CAAWC,QADR,wBAELkB,CAAC,CAACI,MAAF,CAASO,IAFJ,CAEWX,CAAC,CAACI,MAAF,CAASQ,KAFpB,EADI,CAAd,EAMD,CA9FkB,CAEjBjC,OAAO,CAACC,GAAR,CAAY,MAAKhB,KAAjB,EACA,MAAKiB,KAAL,CAAa,CACXC,QAAQ,CAAE,CACRL,MAAM,CAAE,CADA,CAER+B,SAAS,CAAE,IAFH,CAGRzB,OAAO,CAAE,IAHD,CAIRC,QAAQ,CAAE,IAJF,CAKRM,UAAU,CAAE,CALJ,CAMRE,WAAW,CAAE,IANL,CAORD,QAAQ,CAAE,EAPF,CADC,CAUXsB,SAAS,CAAE,EAVA,CAAb,CAYA,MAAKH,WAAL,CAAmB,MAAKA,WAAL,CAAiBI,IAAjB,+BAAnB,CACA,MAAK/C,YAAL,CAAoB,MAAKA,YAAL,CAAkB+C,IAAlB,+BAApB,CACA,MAAKf,aAAL,CAAqB,MAAKA,aAAL,CAAmBe,IAAnB,+BAArB,CAjBiB,aAkBlB,C,qDAED,4BAAoB,CAClB,GAAQ9C,YAAR,CAAwB,KAAKJ,KAAL,CAAWC,MAAnC,CAAQG,WAAR,CACA,GAAIA,WAAJ,CAAiB,CACf,GAAMC,SAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAjB,CACA,GAAMS,SAAQ,CAAGb,QAAQ,CAACM,IAAT,CAAc,SAACC,IAAD,CAAU,CACvC,MAAOA,KAAI,CAACC,MAAL,GAAgBC,QAAQ,CAACV,WAAD,CAA/B,CACD,CAFgB,CAAjB,CAGA,KAAK2B,QAAL,CAAc,CACZb,QAAQ,CAAEA,QADE,CAAd,EAGD,CACF,C,kCAED,6BAAqB,CACnBH,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAqC,KAAKC,KAAL,CAAWC,QAAhD,EACD,C,sBA4DD,iBAAS,CACP,mBACE,sCACE,aAAK,SAAS,CAAC,eAAf,wBACE,WAAI,SAAS,CAAC,EAAd,sBADF,cAEE,aAAK,SAAS,CAAC,2BAAf,wBACE,KAAC,SAAD,EACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,KAAKiB,aAFjB,CAGE,KAAK,CAAE,CAAC,KAAKlB,KAAL,CAAWC,QAAX,CAAoB0B,SAH9B,CAIE,UAAU,CAAC,mBAJb,EADF,cAOE,aAPF,cAQE,KAAC,SAAD,EACE,QAAQ,CAAE,KAAKE,WADjB,CAEE,IAAI,CAAC,SAFP,CAGE,KAAK,CAAC,SAHR,CAIE,KAAK,CAAE,CAAC,KAAK7B,KAAL,CAAWC,QAAX,CAAoBC,OAJ9B,CAKE,UAAU,CAAC,mBALb,CAME,KAAK,CAAE,KAAKF,KAAL,CAAWC,QAAX,CAAoBC,OAApB,EAA+B,EANxC,EARF,cAgBE,KAAC,SAAD,EACE,QAAQ,CAAE,KAAK2B,WADjB,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAC,UAHR,CAIE,KAAK,CAAE,CAAC,KAAK7B,KAAL,CAAWC,QAAX,CAAoBE,QAJ9B,CAKE,UAAU,CAAC,mBALb,CAME,KAAK,CAAE,KAAKH,KAAL,CAAWC,QAAX,CAAoBE,QAApB,EAAgC,EANzC,EAhBF,cAwBE,KAAC,MAAD,EACE,OAAO,CAAE,KAAKjB,YADhB,CAEE,SAAS,CAAC,mBAFZ,CAGE,OAAO,CAAC,UAHV,iBAxBF,GAFF,GADF,EADF,CAuCD,C,qBAxImBR,KAAK,CAACwD,S,EA0I5B,cAAerD,WAAU,CAACI,OAAD,CAAzB"},"metadata":{},"sourceType":"module"}